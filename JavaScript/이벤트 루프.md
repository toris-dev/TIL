## 이벤트 루프 - 구성요소
### Call Stack
* 작성된 함수들이 등록되는 LIFO 스택
* 이벤트 루프는 콜스택이 비어있을 떄까지 스택의 함수를 실행
### Messag Queue 
* setTimeout 같은 지연실행 함수를 등록하는 FIFO 큐
* 정해진 timing이 끝나고, **콜스택이 비어있을 경우** 등록된 함수를 콜스택에 추가
###  Job Queue
* Promise 에 등록 된 콜백을 등록하는 FIFO 큐
* 상위 함수가 종료되기 전에 콜스택이 비어있지 않더라도 잡큐에 등록된 콜백을 콜스택에 추가.

![](../image/이벤트루프_콜스택%20작동순서.png)


![](../image/이벤트루프_%20메시큐의%20작동순서.png)

![](../image/이벤트루프_%20잡큐의%20작동순서.png)

* 이벤트루프는 비동기 동작의 실행 타이밍을 이해하는 것이 중요!!
* setTimout은 콜스택이 비어있을 때 실행되며
* Promise는 상위함수가 종료되기 전에 실행된다.

---
## 자바스크립트 비동기
* 자바스크립트 엔진은 비동기 처리를 제공하지 않는다.
* 대신, 비동기 코드는 정해진 함수를 제공하여 활용할 수 있다.
* 이 함수들을 API(Application Programming Interface) 라 한다.
* 비동기 API의 예시로, setTimeout, XMLHttpRequest, fetch 등의 WEB API 가 있다.
* node.js 의 경우 파일 처리 API fs, 암호화 API 등을 제공한다.

![비동기 처리 모델](/image/스크린샷-2024-01-15-145323.png)

## 비동기 처리 모델
* 비동기 코드를 처리하는 모듈은 자바스크립트 엔진 외부에 있다.
* **이벤트 루프**(event loop), **태스크 큐**(task queue), **잡 큐**(job queue) 등으로 구성된다.
* API 모듈은 비동기 요청을 처리 후 태스크 큐에 콜백 함수를 넣는다.
* **자바스크립트 엔진인 콜 스택이 비워지면, 태스크 큐의 콜백 함수를 실행한다.**
